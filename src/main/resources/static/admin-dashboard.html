<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Logistics Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar h1 {
            color: #333;
            font-size: 24px;
        }

        .navbar .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .navbar .user-info p {
            color: #666;
            font-size: 14px;
        }

        .navbar .logout-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .navbar .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .dashboard {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            padding: 40px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .dashboard h2 {
            color: #333;
            font-size: 32px;
            margin-bottom: 20px;
        }

        .dashboard p {
            color: #666;
            font-size: 16px;
            margin-bottom: 30px;
            max-width: 500px;
        }

        .placeholder-content {
            background: #f5f5f5;
            padding: 60px;
            border-radius: 10px;
            border: 2px dashed #ddd;
            margin: 20px 0;
        }

        .placeholder-content h3 {
            color: #999;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .placeholder-content p {
            color: #bbb;
            font-size: 14px;
        }

        .admin-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 20px;
        }

        .menu-section {
            display: none;
            margin-top: 40px;
        }

        .menu-section.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .main-menu {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .main-menu-btn {
            padding: 15px 40px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .main-menu-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .menu-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .menu-btn {
            padding: 12px 20px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .menu-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .back-btn {
            padding: 10px 20px;
            background: #f5f5f5;
            color: #666;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #e0e0e0;
        }

        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .main-menu-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .main-menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .form-section {
            display: none;
            background: #f9f9f9;
            padding: 30px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .form-section.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .form-buttons button {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .form-buttons .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
        }

        .form-buttons .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .form-buttons .cancel-btn {
            background: #e0e0e0;
            color: #666;
            flex: 1;
        }

        .form-buttons .cancel-btn:hover {
            background: #d0d0d0;
        }

        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 0.8s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <h1>üë®‚Äçüíº Admin Dashboard</h1>
        <div class="user-info">
            <p id="adminPhone">Welcome, Admin!</p>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </nav>

    <div class="container">
        <div class="dashboard">
            <h2>Welcome to Admin Dashboard</h2>
            <p style="margin-bottom: 30px;">Manage drivers, trucks, and carriers efficiently</p>

            <p style="margin-top: 10px; color: #999; font-size: 12px;">
                You are logged in as: <span id="displayPhone" style="color: #667eea; font-weight: 600;">Loading...</span>
            </p>
            <span class="admin-badge">ADMIN ACCESS</span>

            <!-- Main Menu -->
            <div class="main-menu">
                <button class="main-menu-btn" onclick="showMenu('driver')">üöó Driver</button>
                <button class="main-menu-btn" onclick="showMenu('truck')">üöö Truck</button>
                <button class="main-menu-btn" onclick="showMenu('carrier')">üè¢ Carrier</button>
                <button class="main-menu-btn" onclick="showMenu('address')">üìç Address</button>
                <button class="main-menu-btn" onclick="showMenu('loading')">üì¶ Loading</button>
                <button class="main-menu-btn" onclick="showMenu('unloading')">üìÆ Unloading</button>
                <button class="main-menu-btn" onclick="showMenu('order')">üîÑ Order</button>
            </div>

            <!-- Driver Menu Section -->
            <div id="driver-menu" class="menu-section">
                <h3 style="color: #333; margin-bottom: 20px;">Driver Management</h3>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="openForm('saveDriver')">Save Driver</button>
                    <button class="menu-btn" onclick="openForm('findDriver')">Find Driver</button>
                    <button class="menu-btn" onclick="openForm('deleteDriver')">Delete Driver</button>
                    <button class="menu-btn" onclick="openForm('updateDriverByTruck')">Update by Truck/Carrier</button>
                </div>
                <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            </div>

            <!-- Truck Menu Section -->
            <div id="truck-menu" class="menu-section">
                <h3 style="color: #333; margin-bottom: 20px;">Truck Management</h3>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="openForm('saveTruck')">Save Truck</button>
                    <button class="menu-btn" onclick="openForm('findTruck')">Find Truck</button>
                    <button class="menu-btn" onclick="openForm('deleteTruck')">Delete Truck</button>
                    <button class="menu-btn" onclick="openForm('updateTruckByCarrier')">Update by Carrier</button>
                </div>
                <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            </div>

            <!-- Carrier Menu Section -->
            <div id="carrier-menu" class="menu-section">
                <h3 style="color: #333; margin-bottom: 20px;">Carrier Management</h3>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="openForm('saveCarrier')">Save Carrier</button>
                    <button class="menu-btn" onclick="openForm('findCarrier')">Find Carrier</button>
                    <button class="menu-btn" onclick="openForm('deleteCarrier')">Delete Carrier</button>
                </div>
                <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            </div>

            <!-- Address Menu Section -->
            <div id="address-menu" class="menu-section">
                <h3 style="color: #333; margin-bottom: 20px;">Address Management</h3>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="openForm('saveAddress')">Save Address</button>
                    <button class="menu-btn" onclick="openForm('findAddress')">Find Address</button>
                    <button class="menu-btn" onclick="openForm('deleteAddress')">Delete Address</button>
                </div>
                <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            </div>

            <!-- Loading Menu Section -->
            <div id="loading-menu" class="menu-section">
                <h3 style="color: #333; margin-bottom: 20px;">Loading Management</h3>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="openForm('saveLoadingLocation')">Save Loading Location</button>
                    <button class="menu-btn" onclick="openForm('findLoadingLocation')">Find Loading Location</button>
                    <button class="menu-btn" onclick="openForm('deleteLoadingLocation')">Delete Loading Location</button>
                </div>
                <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            </div>

            <!-- Unloading Menu Section -->
            <div id="unloading-menu" class="menu-section">
                <h3 style="color: #333; margin-bottom: 20px;">Unloading Management</h3>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="openForm('saveUnloadingLocation')">Save Unloading Location</button>
                    <button class="menu-btn" onclick="openForm('findUnloadingLocation')">Find Unloading Location</button>
                    <button class="menu-btn" onclick="openForm('deleteUnloadingLocation')">Delete Unloading Location</button>
                </div>
                <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            </div>

            <!-- Order Menu Section -->
            <div id="order-menu" class="menu-section">
                <h3 style="color: #333; margin-bottom: 20px;">Order Management</h3>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="openForm('updateCarrierByTruckId')">Update Carrier by Truck ID</button>
                    <button class="menu-btn" onclick="openForm('updateLoadingUnloadingDateTime')">Update Loading Unloading DateTime</button>
                </div>
                <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            </div>

            <!-- Save Driver Form -->
            <div id="saveDriver-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Save New Driver</h3>
                <div id="saveDriver-alert" class="alert"></div>
                <div id="saveDriver-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="saveDriverForm" onsubmit="handleSaveDriver(event)">
                    <div class="form-group">
                        <label for="driverId">Driver ID</label>
                        <input type="number" id="driverId" name="id" placeholder="Enter driver ID" required>
                    </div>

                    <div class="form-group">
                        <label for="driverName">Driver Name</label>
                        <input type="text" id="driverName" name="name" placeholder="Enter driver name" required>
                    </div>

                    <div class="form-group">
                        <label for="driverContact">Contact Number</label>
                        <input type="tel" id="driverContact" name="contact" placeholder="Enter contact number" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Save Driver</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('saveDriver')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Find Driver Form -->
            <div id="findDriver-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Find Driver</h3>
                <div id="findDriver-alert" class="alert"></div>
                <div id="findDriver-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="findDriverForm" onsubmit="handleFindDriver(event)">
                    <div class="form-group">
                        <label for="findDriverId">Driver ID</label>
                        <input type="number" id="findDriverId" name="id" placeholder="Enter driver ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Find Driver</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('findDriver')">Cancel</button>
                    </div>
                </form>

                <!-- Driver Details Display -->
                <div id="findDriver-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Driver Details</h4>
                    <p><strong>Driver ID:</strong> <span id="detailId"></span></p>
                    <p><strong>Driver Name:</strong> <span id="detailName"></span></p>
                    <p><strong>Contact Number:</strong> <span id="detailContact"></span></p>
                </div>
            </div>

            <!-- Delete Driver Form -->
            <div id="deleteDriver-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Delete Driver</h3>
                <div id="deleteDriver-alert" class="alert"></div>
                <div id="deleteDriver-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="deleteDriverForm" onsubmit="handleDeleteDriver(event)">
                    <div class="form-group">
                        <label for="deleteDriverId">Driver ID</label>
                        <input type="number" id="deleteDriverId" name="id" placeholder="Enter driver ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn" style="background: #dc3545;">Delete Driver</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('deleteDriver')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Update Driver by Truck/Carrier Form -->
            <div id="updateDriverByTruck-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Update Driver by Truck/Carrier</h3>
                <div id="updateDriverByTruck-alert" class="alert"></div>
                <div id="updateDriverByTruck-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="updateDriverByTruckForm" onsubmit="handleUpdateDriverByTruck(event)">
                    <div class="form-group">
                        <label for="truckCarrierId">Truck/Carrier ID</label>
                        <input type="text" id="truckCarrierId" name="truckCarrierId" placeholder="Enter truck/carrier ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Update Driver</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('updateDriverByTruck')">Cancel</button>
                    </div>
                </form>

                <!-- Updated Driver Details Display -->
                <div id="updateDriverByTruck-details" style="margin-top: 20px; padding: 20px; background: #f0f8ff; border-left: 4px solid #667eea; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">üìã Updated Driver Details</h4>
                    <div style="background: white; padding: 15px; border-radius: 5px; line-height: 2;">
                        <p><strong>Driver ID:</strong> <span id="updateDetailId" style="color: #667eea; font-weight: 600;"></span></p>
                        <p><strong>Driver Name:</strong> <span id="updateDetailName" style="color: #667eea; font-weight: 600;"></span></p>
                        <p><strong>Contact Number:</strong> <span id="updateDetailContact" style="color: #667eea; font-weight: 600;"></span></p>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        <p><strong>üöö Truck Details:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Truck ID:</strong> <span id="updateDetailTruckId" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Truck Name:</strong> <span id="updateDetailTruckName" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Truck Capacity:</strong> <span id="updateDetailTruckCapacity" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        <p><strong>üè¢ Carrier Details:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Carrier ID:</strong> <span id="updateDetailCarrierId" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Carrier Name:</strong> <span id="updateDetailCarrierName" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Carrier Contact:</strong> <span id="updateDetailCarrierContact" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Save Truck Form -->
            <div id="saveTruck-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Save New Truck</h3>
                <div id="saveTruck-alert" class="alert"></div>
                <div id="saveTruck-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="saveTruckForm" onsubmit="handleSaveTruck(event)">
                    <div class="form-group">
                        <label for="truckId">Truck ID</label>
                        <input type="number" id="truckId" name="id" placeholder="Enter truck ID" required>
                    </div>

                    <div class="form-group">
                        <label for="truckName">Truck Name</label>
                        <input type="text" id="truckName" name="name" placeholder="Enter truck name" required>
                    </div>

                    <div class="form-group">
                        <label for="truckCapacity">Truck Capacity</label>
                        <input type="text" id="truckCapacity" name="capacity" placeholder="Enter truck capacity" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Save Truck</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('saveTruck')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Find Truck Form -->
            <div id="findTruck-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Find Truck</h3>
                <div id="findTruck-alert" class="alert"></div>
                <div id="findTruck-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="findTruckForm" onsubmit="handleFindTruck(event)">
                    <div class="form-group">
                        <label for="findTruckId">Truck ID</label>
                        <input type="number" id="findTruckId" name="id" placeholder="Enter truck ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Find Truck</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('findTruck')">Cancel</button>
                    </div>
                </form>

                <!-- Truck Details Display -->
                <div id="findTruck-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Truck Details</h4>
                    <p><strong>Truck ID:</strong> <span id="detailTruckId"></span></p>
                    <p><strong>Truck Name:</strong> <span id="detailTruckName"></span></p>
                    <p><strong>Truck Capacity:</strong> <span id="detailTruckCapacity"></span></p>
                </div>
            </div>

            <!-- Delete Truck Form -->
            <div id="deleteTruck-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Delete Truck</h3>
                <div id="deleteTruck-alert" class="alert"></div>
                <div id="deleteTruck-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="deleteTruckForm" onsubmit="handleDeleteTruck(event)">
                    <div class="form-group">
                        <label for="deleteTruckId">Truck ID</label>
                        <input type="number" id="deleteTruckId" name="id" placeholder="Enter truck ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn" style="background: #dc3545;">Delete Truck</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('deleteTruck')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Update Truck by Carrier Form -->
            <div id="updateTruckByCarrier-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Update Truck by Carrier</h3>
                <div id="updateTruckByCarrier-alert" class="alert"></div>
                <div id="updateTruckByCarrier-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="updateTruckByCarrierForm" onsubmit="handleUpdateTruckByCarrier(event)">
                    <div class="form-group">
                        <label for="updateTruckCarrierId">Carrier ID</label>
                        <input type="text" id="updateTruckCarrierId" name="carrierId" placeholder="Enter carrier ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Update Truck</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('updateTruckByCarrier')">Cancel</button>
                    </div>
                </form>

                <!-- Updated Truck Details Display -->
                <div id="updateTruckByCarrier-details" style="margin-top: 20px; padding: 20px; background: #f0f8ff; border-left: 4px solid #667eea; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">üìã Updated Truck Details</h4>
                    <div style="background: white; padding: 15px; border-radius: 5px; line-height: 2;">
                        <p><strong>Truck ID:</strong> <span id="updateTruckDetailId" style="color: #667eea; font-weight: 600;"></span></p>
                        <p><strong>Truck Name:</strong> <span id="updateTruckDetailName" style="color: #667eea; font-weight: 600;"></span></p>
                        <p><strong>Truck Capacity:</strong> <span id="updateTruckDetailCapacity" style="color: #667eea; font-weight: 600;"></span></p>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        <p><strong>üè¢ Carrier Details:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Carrier ID:</strong> <span id="updateTruckCarrierDetailId" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Carrier Name:</strong> <span id="updateTruckCarrierDetailName" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Carrier Contact:</strong> <span id="updateTruckCarrierDetailContact" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Save Carrier Form -->
            <div id="saveCarrier-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Save New Carrier</h3>
                <div id="saveCarrier-alert" class="alert"></div>
                <div id="saveCarrier-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="saveCarrierForm" onsubmit="handleSaveCarrier(event)">
                    <div class="form-group">
                        <label for="carrierId">Carrier ID</label>
                        <input type="number" id="carrierId" name="id" placeholder="Enter carrier ID" required>
                    </div>

                    <div class="form-group">
                        <label for="carrierName">Carrier Name</label>
                        <input type="text" id="carrierName" name="name" placeholder="Enter carrier name" required>
                    </div>

                    <div class="form-group">
                        <label for="carrierContact">Contact Number</label>
                        <input type="tel" id="carrierContact" name="contact" placeholder="Enter contact number" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Save Carrier</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('saveCarrier')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Find Carrier Form -->
            <div id="findCarrier-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Find Carrier</h3>
                <div id="findCarrier-alert" class="alert"></div>
                <div id="findCarrier-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="findCarrierForm" onsubmit="handleFindCarrier(event)">
                    <div class="form-group">
                        <label for="findCarrierId">Carrier ID</label>
                        <input type="number" id="findCarrierId" name="id" placeholder="Enter carrier ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Find Carrier</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('findCarrier')">Cancel</button>
                    </div>
                </form>

                <!-- Carrier Details Display -->
                <div id="findCarrier-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Carrier Details</h4>
                    <p><strong>Carrier ID:</strong> <span id="detailCarrierId"></span></p>
                    <p><strong>Carrier Name:</strong> <span id="detailCarrierName"></span></p>
                    <p><strong>Contact Number:</strong> <span id="detailCarrierContact"></span></p>
                </div>
            </div>

            <!-- Delete Carrier Form -->
            <div id="deleteCarrier-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Delete Carrier</h3>
                <div id="deleteCarrier-alert" class="alert"></div>
                <div id="deleteCarrier-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="deleteCarrierForm" onsubmit="handleDeleteCarrier(event)">
                    <div class="form-group">
                        <label for="deleteCarrierId">Carrier ID</label>
                        <input type="number" id="deleteCarrierId" name="id" placeholder="Enter carrier ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn" style="background: #dc3545;">Delete Carrier</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('deleteCarrier')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Save Address Form -->
            <div id="saveAddress-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Save New Address</h3>
                <div id="saveAddress-alert" class="alert"></div>
                <div id="saveAddress-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="saveAddressForm" onsubmit="handleSaveAddress(event)">
                    <div class="form-group">
                        <label for="addressId">Address ID</label>
                        <input type="number" id="addressId" name="id" placeholder="Enter address ID" required>
                    </div>

                    <div class="form-group">
                        <label for="addressStreet">Street</label>
                        <input type="text" id="addressStreet" name="street" placeholder="Enter street address" required>
                    </div>

                    <div class="form-group">
                        <label for="addressCity">City</label>
                        <input type="text" id="addressCity" name="city" placeholder="Enter city" required>
                    </div>

                    <div class="form-group">
                        <label for="addressPincode">Pincode</label>
                        <input type="text" id="addressPincode" name="pincode" placeholder="Enter pincode" required>
                    </div>

                    <div class="form-group">
                        <label for="addressState">State</label>
                        <input type="text" id="addressState" name="state" placeholder="Enter state" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Save Address</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('saveAddress')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Find Address Form -->
            <div id="findAddress-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Find Address</h3>
                <div id="findAddress-alert" class="alert"></div>
                <div id="findAddress-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="findAddressForm" onsubmit="handleFindAddress(event)">
                    <div class="form-group">
                        <label for="findAddressId">Address ID</label>
                        <input type="number" id="findAddressId" name="id" placeholder="Enter address ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Find Address</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('findAddress')">Cancel</button>
                    </div>
                </form>

                <!-- Address Details Display -->
                <div id="findAddress-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Address Details</h4>
                    <p><strong>Address ID:</strong> <span id="detailAddressId"></span></p>
                    <p><strong>Street:</strong> <span id="detailAddressStreet"></span></p>
                    <p><strong>City:</strong> <span id="detailAddressCity"></span></p>
                    <p><strong>Pincode:</strong> <span id="detailAddressPincode"></span></p>
                    <p><strong>State:</strong> <span id="detailAddressState"></span></p>
                </div>
            </div>

            <!-- Delete Address Form -->
            <div id="deleteAddress-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Delete Address</h3>
                <div id="deleteAddress-alert" class="alert"></div>
                <div id="deleteAddress-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="deleteAddressForm" onsubmit="handleDeleteAddress(event)">
                    <div class="form-group">
                        <label for="deleteAddressId">Address ID</label>
                        <input type="number" id="deleteAddressId" name="id" placeholder="Enter address ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn" style="background: #dc3545;">Delete Address</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('deleteAddress')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Save Loading Location Form -->
            <div id="saveLoadingLocation-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Save Loading Location</h3>
                <div id="saveLoadingLocation-alert" class="alert"></div>
                <div id="saveLoadingLocation-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="saveLoadingLocationForm" onsubmit="handleSaveLoadingLocation(event)">
                    <div class="form-group">
                        <label for="loadingLocationId">Loading ID</label>
                        <input type="number" id="loadingLocationId" name="id" placeholder="Enter loading ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Save Loading Location</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('saveLoadingLocation')">Cancel</button>
                    </div>
                </form>

                <!-- Save Loading Location Details Display -->
                <div id="saveLoadingLocation-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Loading Location Details</h4>
                    <p><strong>Loading ID:</strong> <span id="detailSaveLoadingLocationId"></span></p>
                    <p><strong>Date:</strong> <span id="detailSaveLoadingLocationDate"></span></p>
                    <p><strong>Time:</strong> <span id="detailSaveLoadingLocationTime"></span></p>
                    <p><strong>Address ID:</strong> <span id="detailSaveLoadingLocationAddressId"></span></p>
                </div>
            </div>

            <!-- Find Loading Location Form -->
            <div id="findLoadingLocation-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Find Loading Location</h3>
                <div id="findLoadingLocation-alert" class="alert"></div>
                <div id="findLoadingLocation-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="findLoadingLocationForm" onsubmit="handleFindLoadingLocation(event)">
                    <div class="form-group">
                        <label for="findLoadingLocationId">Loading ID</label>
                        <input type="number" id="findLoadingLocationId" name="id" placeholder="Enter loading ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Find Loading Location</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('findLoadingLocation')">Cancel</button>
                    </div>
                </form>

                <!-- Loading Location Details Display -->
                <div id="findLoadingLocation-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Loading Location Details</h4>
                    <p><strong>Loading ID:</strong> <span id="detailLoadingLocationId"></span></p>
                    <p><strong>Date:</strong> <span id="detailLoadingLocationDate"></span></p>
                    <p><strong>Time:</strong> <span id="detailLoadingLocationTime"></span></p>
                    <p><strong>Address ID:</strong> <span id="detailLoadingLocationAddressId"></span></p>
                </div>
            </div>

            <!-- Delete Loading Location Form -->
            <div id="deleteLoadingLocation-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Delete Loading Location</h3>
                <div id="deleteLoadingLocation-alert" class="alert"></div>
                <div id="deleteLoadingLocation-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="deleteLoadingLocationForm" onsubmit="handleDeleteLoadingLocation(event)">
                    <div class="form-group">
                        <label for="deleteLoadingLocationId">Loading ID</label>
                        <input type="number" id="deleteLoadingLocationId" name="id" placeholder="Enter loading ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn" style="background: #dc3545;">Delete Loading Location</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('deleteLoadingLocation')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Save Unloading Location Form -->
            <div id="saveUnloadingLocation-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Save Unloading Location</h3>
                <div id="saveUnloadingLocation-alert" class="alert"></div>
                <div id="saveUnloadingLocation-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="saveUnloadingLocationForm" onsubmit="handleSaveUnloadingLocation(event)">
                    <div class="form-group">
                        <label for="unloadingLocationId">Unloading ID</label>
                        <input type="number" id="unloadingLocationId" name="id" placeholder="Enter unloading ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Save Unloading Location</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('saveUnloadingLocation')">Cancel</button>
                    </div>
                </form>

                <!-- Save Unloading Location Details Display -->
                <div id="saveUnloadingLocation-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Unloading Location Details</h4>
                    <p><strong>Unloading ID:</strong> <span id="detailSaveUnloadingLocationId"></span></p>
                    <p><strong>Date:</strong> <span id="detailSaveUnloadingLocationDate"></span></p>
                    <p><strong>Time:</strong> <span id="detailSaveUnloadingLocationTime"></span></p>
                    <p><strong>Address ID:</strong> <span id="detailSaveUnloadingLocationAddressId"></span></p>
                </div>
            </div>

            <!-- Find Unloading Location Form -->
            <div id="findUnloadingLocation-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Find Unloading Location</h3>
                <div id="findUnloadingLocation-alert" class="alert"></div>
                <div id="findUnloadingLocation-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="findUnloadingLocationForm" onsubmit="handleFindUnloadingLocation(event)">
                    <div class="form-group">
                        <label for="findUnloadingLocationId">Unloading ID</label>
                        <input type="number" id="findUnloadingLocationId" name="id" placeholder="Enter unloading ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Find Unloading Location</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('findUnloadingLocation')">Cancel</button>
                    </div>
                </form>

                <!-- Unloading Location Details Display -->
                <div id="findUnloadingLocation-details" style="margin-top: 20px; padding: 20px; background: white; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">Unloading Location Details</h4>
                    <p><strong>Address ID:</strong> <span id="detailUnloadingLocationId"></span></p>
                    <p><strong>Street:</strong> <span id="detailUnloadingLocationStreet"></span></p>
                    <p><strong>City:</strong> <span id="detailUnloadingLocationCity"></span></p>
                    <p><strong>Pincode:</strong> <span id="detailUnloadingLocationPincode"></span></p>
                    <p><strong>State:</strong> <span id="detailUnloadingLocationState"></span></p>
                </div>
            </div>

            <!-- Delete Unloading Location Form -->
            <div id="deleteUnloadingLocation-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Delete Unloading Location</h3>
                <div id="deleteUnloadingLocation-alert" class="alert"></div>
                <div id="deleteUnloadingLocation-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="deleteUnloadingLocationForm" onsubmit="handleDeleteUnloadingLocation(event)">
                    <div class="form-group">
                        <label for="deleteUnloadingLocationId">Unloading ID</label>
                        <input type="number" id="deleteUnloadingLocationId" name="id" placeholder="Enter unloading ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn" style="background: #dc3545;">Delete Unloading Location</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('deleteUnloadingLocation')">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Update Carrier by Truck ID Form -->
            <div id="updateCarrierByTruckId-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Update Carrier by Truck ID</h3>
                <div id="updateCarrierByTruckId-alert" class="alert"></div>
                <div id="updateCarrierByTruckId-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="updateCarrierByTruckIdForm" onsubmit="handleUpdateCarrierByTruckId(event)">
                    <div class="form-group">
                        <label for="orderIdForCarrier">Order ID</label>
                        <input type="number" id="orderIdForCarrier" name="orderId" placeholder="Enter order ID" required>
                    </div>

                    <div class="form-group">
                        <label for="truckIdForCarrier">Truck ID</label>
                        <input type="number" id="truckIdForCarrier" name="truckId" placeholder="Enter truck ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Update Carrier</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('updateCarrierByTruckId')">Cancel</button>
                    </div>
                </form>

                <!-- Updated Carrier Details Display -->
                <div id="updateCarrierByTruckId-details" style="margin-top: 20px; padding: 20px; background: #f0f8ff; border-left: 4px solid #667eea; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">üìã Updated Order & Carrier Details</h4>
                    <div style="background: white; padding: 15px; border-radius: 5px; line-height: 2;">
                        <!-- Order Details Section -->
                        <p><strong>Order ID:</strong> <span id="carrierOrderId" style="color: #667eea; font-weight: 600;"></span></p>
                        <p><strong>Order Status:</strong> <span id="carrierOrderStatus" style="color: #667eea; font-weight: 600;"></span></p>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        
                        <!-- Cargo Details Section -->
                        <p><strong>üì¶ Cargo Details:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Cargo ID:</strong> <span id="carrierCargoId" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Cargo Name:</strong> <span id="carrierCargoName" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Description:</strong> <span id="carrierCargoDescription" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Weight:</strong> <span id="carrierCargoWeight" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Count:</strong> <span id="carrierCargoCount" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        
                        <!-- Loading Address Section -->
                        <p><strong>üìç Loading Address:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Street:</strong> <span id="carrierLoadingStreet" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>City:</strong> <span id="carrierLoadingCity" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Pincode:</strong> <span id="carrierLoadingPincode" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>State:</strong> <span id="carrierLoadingState" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        
                        <!-- Unloading Address Section -->
                        <p><strong>üìç Unloading Address:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Street:</strong> <span id="carrierUnloadingStreet" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>City:</strong> <span id="carrierUnloadingCity" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Pincode:</strong> <span id="carrierUnloadingPincode" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>State:</strong> <span id="carrierUnloadingState" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        
                        <!-- Truck Details Section -->
                        <p><strong>üöö Truck Details:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Truck ID:</strong> <span id="carrierTruckId" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Truck Name:</strong> <span id="carrierTruckName" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Truck Capacity:</strong> <span id="carrierTruckCapacity" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        
                        <!-- Driver Details Section -->
                        <p><strong>üöó Driver Details:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Driver ID:</strong> <span id="carrierDriverId" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Driver Name:</strong> <span id="carrierDriverName" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Driver Contact:</strong> <span id="carrierDriverContact" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #eee;">
                        
                        <!-- Carrier Details Section -->
                        <p><strong>üè¢ Carrier Details:</strong></p>
                        <div style="margin-left: 20px; background: #f9f9f9; padding: 10px; border-radius: 3px;">
                            <p style="margin: 5px 0;"><strong>Carrier ID:</strong> <span id="carrierByTruckId" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Carrier Name:</strong> <span id="carrierByTruckName" style="color: #667eea; font-weight: 600;"></span></p>
                            <p style="margin: 5px 0;"><strong>Carrier Contact:</strong> <span id="carrierByTruckContact" style="color: #667eea; font-weight: 600;"></span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Update Loading Unloading DateTime Form -->
            <div id="updateLoadingUnloadingDateTime-form" class="form-section">
                <h3 style="color: #333; margin-bottom: 20px;">Update Loading Unloading DateTime</h3>
                <div id="updateLoadingUnloadingDateTime-alert" class="alert"></div>
                <div id="updateLoadingUnloadingDateTime-loading" class="loading">
                    <div class="spinner"></div>
                </div>
                
                <form id="updateLoadingUnloadingDateTimeForm" onsubmit="handleUpdateLoadingUnloadingDateTime(event)">
                    <div class="form-group">
                        <label for="orderId">Order ID</label>
                        <input type="number" id="orderId" name="orderId" placeholder="Enter order ID" required>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="submit-btn">Update DateTime</button>
                        <button type="button" class="cancel-btn" onclick="closeForm('updateLoadingUnloadingDateTime')">Cancel</button>
                    </div>
                </form>

                <!-- Updated DateTime Details Display -->
                <div id="updateLoadingUnloadingDateTime-details" style="margin-top: 20px; padding: 20px; background: #f0f8ff; border-left: 4px solid #667eea; border-radius: 5px; display: none;">
                    <h4 style="color: #333; margin-bottom: 15px;">‚è∞ Updated Loading/Unloading DateTime</h4>
                    <div style="background: white; padding: 15px; border-radius: 5px; line-height: 2;">
                        <p><strong>Order ID:</strong> <span id="dateTimeOrderId" style="color: #667eea; font-weight: 600;"></span></p>
                        <p><strong>Loading DateTime:</strong> <span id="dateTimeLoadingDateTime" style="color: #667eea; font-weight: 600;"></span></p>
                        <p><strong>Unloading DateTime:</strong> <span id="dateTimeUnloadingDateTime" style="color: #667eea; font-weight: 600;"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:8080';

        // Get admin phone from localStorage
        window.addEventListener('load', function() {
            const adminPhone = localStorage.getItem('adminPhone');
            if (adminPhone) {
                document.getElementById('adminPhone').textContent = `Welcome, Admin (${adminPhone})`;
                document.getElementById('displayPhone').textContent = adminPhone;
            } else {
                // If no phone found, redirect to login
                window.location.href = '/login.html';
            }
        });

        function logout() {
            // Clear admin data
            localStorage.removeItem('adminPhone');
            // Redirect to login
            window.location.href = '/login.html';
        }

        // Menu Functions
        function showMenu(menuName) {
            // Hide all menus and forms
            document.querySelectorAll('.menu-section').forEach(menu => {
                menu.classList.remove('active');
            });
            document.querySelectorAll('.form-section').forEach(form => {
                form.classList.remove('active');
            });
            
            // Show selected menu
            const menu = document.getElementById(menuName + '-menu');
            if (menu) {
                menu.classList.add('active');
            }
        }

        function backToMenu() {
            // Hide all menus and forms
            document.querySelectorAll('.menu-section').forEach(menu => {
                menu.classList.remove('active');
            });
            document.querySelectorAll('.form-section').forEach(form => {
                form.classList.remove('active');
            });
        }

        function openForm(formType) {
            // Hide menu
            document.querySelectorAll('.menu-section').forEach(menu => {
                menu.classList.remove('active');
            });
            
            // Show selected form
            const form = document.getElementById(formType + '-form');
            if (form) {
                form.classList.add('active');
            }
        }

        function closeForm(formType) {
            // Hide form
            const form = document.getElementById(formType + '-form');
            if (form) {
                form.classList.remove('active');
                // Reset form if it exists
                const formElement = document.getElementById(formType + 'Form');
                if (formElement) {
                    formElement.reset();
                }
            }
            // Determine which menu to show based on form type
            let menuType = 'driver';
            if (formType.includes('Truck') || formType === 'saveTruck' || formType === 'findTruck' || formType === 'deleteTruck' || formType === 'updateTruckByCarrier') {
                menuType = 'truck';
            } else if (formType.includes('Carrier') || formType === 'saveCarrier' || formType === 'findCarrier' || formType === 'deleteCarrier') {
                menuType = 'carrier';
            } else if (formType.includes('Address') || formType === 'saveAddress' || formType === 'findAddress' || formType === 'deleteAddress') {
                menuType = 'address';
            }
            // Show menu
            showMenu(menuType);
        }

        // Show Alert
        function showAlert(elementId, message, type) {
            const alertEl = document.getElementById(elementId);
            alertEl.textContent = message;
            alertEl.className = `alert show alert-${type}`;
            setTimeout(() => alertEl.classList.remove('show'), 4000);
        }

        // Show/Hide Loading
        function setLoading(elementId, show) {
            const loadingEl = document.getElementById(elementId);
            if (show) {
                loadingEl.classList.add('show');
            } else {
                loadingEl.classList.remove('show');
            }
        }

        // Save Driver Handler
        async function handleSaveDriver(event) {
            event.preventDefault();
            
            const driverData = {
                id: document.getElementById('driverId').value,
                name: document.getElementById('driverName').value,
                contact: document.getElementById('driverContact').value
            };

            setLoading('saveDriver-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/savedriverdetails`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(driverData)
                });

                const data = await response.json();
                console.log('Save Driver Response:', response.status, data);

                if (response.ok) {
                    showAlert('saveDriver-alert', 'Driver saved successfully!', 'success');
                    document.getElementById('saveDriverForm').reset();
                    setTimeout(() => {
                        closeForm('saveDriver');
                    }, 1500);
                } else {
                    showAlert('saveDriver-alert', data.message || 'Failed to save driver', 'error');
                }
            } catch (error) {
                console.error('Error saving driver:', error);
                showAlert('saveDriver-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('saveDriver-loading', false);
            }
        }

        // Find Driver Handler
        async function handleFindDriver(event) {
            event.preventDefault();
            
            const driverId = document.getElementById('findDriverId').value;
            setLoading('findDriver-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/finddriver/${driverId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Find Driver Response:', response.status, data);

                if (response.ok && data.data) {
                    const driver = data.data;
                    document.getElementById('detailId').textContent = driver.id || '-';
                    document.getElementById('detailName').textContent = driver.name || '-';
                    document.getElementById('detailContact').textContent = driver.contact || '-';
                    document.getElementById('findDriver-details').style.display = 'block';
                    showAlert('findDriver-alert', 'Driver found!', 'success');
                } else {
                    document.getElementById('findDriver-details').style.display = 'none';
                    showAlert('findDriver-alert', data.message || 'Driver not found', 'error');
                }
            } catch (error) {
                console.error('Error finding driver:', error);
                document.getElementById('findDriver-details').style.display = 'none';
                showAlert('findDriver-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('findDriver-loading', false);
            }
        }

        // Delete Driver Handler
        async function handleDeleteDriver(event) {
            event.preventDefault();
            
            const driverId = document.getElementById('deleteDriverId').value;
            
            // Confirmation dialog
            if (!confirm(`Are you sure you want to delete driver with ID ${driverId}? This action cannot be undone.`)) {
                return;
            }

            setLoading('deleteDriver-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/deletedriver/${driverId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Delete Driver Response:', response.status, data);

                if (response.ok) {
                    showAlert('deleteDriver-alert', 'Driver deleted successfully!', 'success');
                    document.getElementById('deleteDriverForm').reset();
                    setTimeout(() => {
                        closeForm('deleteDriver');
                    }, 1500);
                } else {
                    showAlert('deleteDriver-alert', data.message || 'Failed to delete driver', 'error');
                }
            } catch (error) {
                console.error('Error deleting driver:', error);
                showAlert('deleteDriver-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('deleteDriver-loading', false);
            }
        }

        // Update Driver by Truck/Carrier Handler
        async function handleUpdateDriverByTruck(event) {
            event.preventDefault();
            
            const truckCarrierId = document.getElementById('truckCarrierId').value;
            setLoading('updateDriverByTruck-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/updatingdriverbytruckCarrier/${truckCarrierId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Update Driver by Truck/Carrier Response:', response.status, data);
                console.log('Full Response Object:', JSON.stringify(data, null, 2));

                if (response.ok) {
                    // Try to get driver data from different possible locations
                    let driver = data.data || data || {};
                    
                    console.log('Driver object:', driver);
                    
                    // Display the driver details
                    document.getElementById('updateDetailId').textContent = driver.id !== undefined && driver.id !== null ? driver.id : '-';
                    document.getElementById('updateDetailName').textContent = driver.name !== undefined && driver.name !== null ? driver.name : '-';
                    document.getElementById('updateDetailContact').textContent = driver.contact !== undefined && driver.contact !== null ? driver.contact : '-';
                    
                    // Display truck details
                    const truck = driver.truck || {};
                    document.getElementById('updateDetailTruckId').textContent = truck.id !== undefined && truck.id !== null ? truck.id : '-';
                    document.getElementById('updateDetailTruckName').textContent = truck.name !== undefined && truck.name !== null ? truck.name : '-';
                    document.getElementById('updateDetailTruckCapacity').textContent = truck.capacity !== undefined && truck.capacity !== null ? truck.capacity : '-';
                    
                    // Display carrier details
                    const carrier = driver.carrier || {};
                    document.getElementById('updateDetailCarrierId').textContent = carrier.id !== undefined && carrier.id !== null ? carrier.id : '-';
                    document.getElementById('updateDetailCarrierName').textContent = carrier.name !== undefined && carrier.name !== null ? carrier.name : '-';
                    document.getElementById('updateDetailCarrierContact').textContent = carrier.contact !== undefined && carrier.contact !== null ? carrier.contact : '-';
                    
                    // Show the details section
                    document.getElementById('updateDriverByTruck-details').style.display = 'block';
                    
                    showAlert('updateDriverByTruck-alert', 'Driver updated successfully!', 'success');
                } else {
                    document.getElementById('updateDriverByTruck-details').style.display = 'none';
                    showAlert('updateDriverByTruck-alert', data.message || 'Failed to update driver', 'error');
                }
            } catch (error) {
                console.error('Error updating driver:', error);
                document.getElementById('updateDriverByTruck-details').style.display = 'none';
                showAlert('updateDriverByTruck-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('updateDriverByTruck-loading', false);
            }
        }

        // ===== TRUCK HANDLERS =====

        // Save Truck Handler
        async function handleSaveTruck(event) {
            event.preventDefault();
            
            const truckData = {
                id: document.getElementById('truckId').value,
                name: document.getElementById('truckName').value,
                capacity: document.getElementById('truckCapacity').value
            };

            setLoading('saveTruck-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/savetruckdetails`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(truckData)
                });

                const data = await response.json();
                console.log('Save Truck Response:', response.status, data);

                if (response.ok) {
                    showAlert('saveTruck-alert', 'Truck saved successfully!', 'success');
                    document.getElementById('saveTruckForm').reset();
                    setTimeout(() => {
                        closeForm('saveTruck');
                    }, 1500);
                } else {
                    showAlert('saveTruck-alert', data.message || 'Failed to save truck', 'error');
                }
            } catch (error) {
                console.error('Error saving truck:', error);
                showAlert('saveTruck-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('saveTruck-loading', false);
            }
        }

        // Find Truck Handler
        async function handleFindTruck(event) {
            event.preventDefault();
            
            const truckId = document.getElementById('findTruckId').value;
            setLoading('findTruck-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/findtruckid/${truckId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Find Truck Response:', response.status, data);

                if (response.ok && data.data) {
                    const truck = data.data;
                    document.getElementById('detailTruckId').textContent = truck.id || '-';
                    document.getElementById('detailTruckName').textContent = truck.name || '-';
                    document.getElementById('detailTruckCapacity').textContent = truck.capacity || '-';
                    document.getElementById('findTruck-details').style.display = 'block';
                    showAlert('findTruck-alert', 'Truck found!', 'success');
                } else {
                    document.getElementById('findTruck-details').style.display = 'none';
                    showAlert('findTruck-alert', data.message || 'Truck not found', 'error');
                }
            } catch (error) {
                console.error('Error finding truck:', error);
                document.getElementById('findTruck-details').style.display = 'none';
                showAlert('findTruck-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('findTruck-loading', false);
            }
        }

        // Delete Truck Handler
        async function handleDeleteTruck(event) {
            event.preventDefault();
            
            const truckId = document.getElementById('deleteTruckId').value;
            
            // Confirmation dialog
            if (!confirm(`Are you sure you want to delete truck with ID ${truckId}? This action cannot be undone.`)) {
                return;
            }

            setLoading('deleteTruck-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/deletetruckid/${truckId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Delete Truck Response:', response.status, data);

                if (response.ok) {
                    showAlert('deleteTruck-alert', 'Truck deleted successfully!', 'success');
                    document.getElementById('deleteTruckForm').reset();
                    setTimeout(() => {
                        closeForm('deleteTruck');
                    }, 1500);
                } else {
                    showAlert('deleteTruck-alert', data.message || 'Failed to delete truck', 'error');
                }
            } catch (error) {
                console.error('Error deleting truck:', error);
                showAlert('deleteTruck-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('deleteTruck-loading', false);
            }
        }

        // Update Truck by Carrier Handler
        async function handleUpdateTruckByCarrier(event) {
            event.preventDefault();
            
            const carrierId = document.getElementById('updateTruckCarrierId').value;
            setLoading('updateTruckByCarrier-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/updatetruckcarrier/${carrierId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Update Truck by Carrier Response:', response.status, data);
                console.log('Full Response Object:', JSON.stringify(data, null, 2));

                if (response.ok) {
                    let truck = data.data || data || {};
                    
                    console.log('Truck object:', truck);
                    
                    // Display the truck details
                    document.getElementById('updateTruckDetailId').textContent = truck.id !== undefined && truck.id !== null ? truck.id : '-';
                    document.getElementById('updateTruckDetailName').textContent = truck.name !== undefined && truck.name !== null ? truck.name : '-';
                    document.getElementById('updateTruckDetailCapacity').textContent = truck.capacity !== undefined && truck.capacity !== null ? truck.capacity : '-';
                    
                    // Display carrier details
                    const carrier = truck.carrier || {};
                    document.getElementById('updateTruckCarrierDetailId').textContent = carrier.id !== undefined && carrier.id !== null ? carrier.id : '-';
                    document.getElementById('updateTruckCarrierDetailName').textContent = carrier.name !== undefined && carrier.name !== null ? carrier.name : '-';
                    document.getElementById('updateTruckCarrierDetailContact').textContent = carrier.contact !== undefined && carrier.contact !== null ? carrier.contact : '-';
                    
                    // Show the details section
                    document.getElementById('updateTruckByCarrier-details').style.display = 'block';
                    
                    showAlert('updateTruckByCarrier-alert', 'Truck updated successfully!', 'success');
                } else {
                    document.getElementById('updateTruckByCarrier-details').style.display = 'none';
                    showAlert('updateTruckByCarrier-alert', data.message || 'Failed to update truck', 'error');
                }
            } catch (error) {
                console.error('Error updating truck:', error);
                document.getElementById('updateTruckByCarrier-details').style.display = 'none';
                showAlert('updateTruckByCarrier-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('updateTruckByCarrier-loading', false);
            }
        }

        // ===== CARRIER HANDLERS =====

        // Save Carrier Handler
        async function handleSaveCarrier(event) {
            event.preventDefault();
            
            const carrierData = {
                id: document.getElementById('carrierId').value,
                name: document.getElementById('carrierName').value,
                contact: document.getElementById('carrierContact').value
            };

            setLoading('saveCarrier-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/savecarrier`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(carrierData)
                });

                const data = await response.json();
                console.log('Save Carrier Response:', response.status, data);

                if (response.ok) {
                    showAlert('saveCarrier-alert', 'Carrier saved successfully!', 'success');
                    document.getElementById('saveCarrierForm').reset();
                    setTimeout(() => {
                        closeForm('saveCarrier');
                    }, 1500);
                } else {
                    showAlert('saveCarrier-alert', data.message || 'Failed to save carrier', 'error');
                }
            } catch (error) {
                console.error('Error saving carrier:', error);
                showAlert('saveCarrier-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('saveCarrier-loading', false);
            }
        }

        // Find Carrier Handler
        async function handleFindCarrier(event) {
            event.preventDefault();
            
            const carrierId = document.getElementById('findCarrierId').value;
            setLoading('findCarrier-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/findcarrier/${carrierId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Find Carrier Response:', response.status, data);

                if (response.ok && data.data) {
                    const carrier = data.data;
                    document.getElementById('detailCarrierId').textContent = carrier.id || '-';
                    document.getElementById('detailCarrierName').textContent = carrier.name || '-';
                    document.getElementById('detailCarrierContact').textContent = carrier.contact || '-';
                    document.getElementById('findCarrier-details').style.display = 'block';
                    showAlert('findCarrier-alert', 'Carrier found!', 'success');
                } else {
                    document.getElementById('findCarrier-details').style.display = 'none';
                    showAlert('findCarrier-alert', data.message || 'Carrier not found', 'error');
                }
            } catch (error) {
                console.error('Error finding carrier:', error);
                document.getElementById('findCarrier-details').style.display = 'none';
                showAlert('findCarrier-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('findCarrier-loading', false);
            }
        }

        // Delete Carrier Handler
        async function handleDeleteCarrier(event) {
            event.preventDefault();
            
            const carrierId = document.getElementById('deleteCarrierId').value;
            
            // Confirmation dialog
            if (!confirm(`Are you sure you want to delete carrier with ID ${carrierId}? This action cannot be undone.`)) {
                return;
            }

            setLoading('deleteCarrier-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/deletecarrier/${carrierId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Delete Carrier Response:', response.status, data);

                if (response.ok) {
                    showAlert('deleteCarrier-alert', 'Carrier deleted successfully!', 'success');
                    document.getElementById('deleteCarrierForm').reset();
                    setTimeout(() => {
                        closeForm('deleteCarrier');
                    }, 1500);
                } else {
                    showAlert('deleteCarrier-alert', data.message || 'Failed to delete carrier', 'error');
                }
            } catch (error) {
                console.error('Error deleting carrier:', error);
                showAlert('deleteCarrier-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('deleteCarrier-loading', false);
            }
        }

        // ===== ADDRESS HANDLERS =====

        // Save Address Handler
        async function handleSaveAddress(event) {
            event.preventDefault();
            
            const addressData = {
                id: document.getElementById('addressId').value,
                street: document.getElementById('addressStreet').value,
                city: document.getElementById('addressCity').value,
                pincode: document.getElementById('addressPincode').value,
                state: document.getElementById('addressState').value
            };

            setLoading('saveAddress-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/saveadress`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(addressData)
                });

                const data = await response.json();
                console.log('Save Address Response:', response.status, data);

                if (response.ok) {
                    showAlert('saveAddress-alert', 'Address saved successfully!', 'success');
                    document.getElementById('saveAddressForm').reset();
                    setTimeout(() => {
                        closeForm('saveAddress');
                    }, 1500);
                } else {
                    showAlert('saveAddress-alert', data.message || 'Failed to save address', 'error');
                }
            } catch (error) {
                console.error('Error saving address:', error);
                showAlert('saveAddress-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('saveAddress-loading', false);
            }
        }

        // Find Address Handler
        async function handleFindAddress(event) {
            event.preventDefault();
            
            const addressId = document.getElementById('findAddressId').value;
            setLoading('findAddress-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/findadress/${addressId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Find Address Response:', response.status, data);

                if (response.ok && data.data) {
                    const address = data.data;
                    document.getElementById('detailAddressId').textContent = address.id || '-';
                    document.getElementById('detailAddressStreet').textContent = address.street || '-';
                    document.getElementById('detailAddressCity').textContent = address.city || '-';
                    document.getElementById('detailAddressPincode').textContent = address.pincode || '-';
                    document.getElementById('detailAddressState').textContent = address.state || '-';
                    document.getElementById('findAddress-details').style.display = 'block';
                    showAlert('findAddress-alert', 'Address found!', 'success');
                } else {
                    document.getElementById('findAddress-details').style.display = 'none';
                    showAlert('findAddress-alert', data.message || 'Address not found', 'error');
                }
            } catch (error) {
                console.error('Error finding address:', error);
                document.getElementById('findAddress-details').style.display = 'none';
                showAlert('findAddress-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('findAddress-loading', false);
            }
        }

        // Delete Address Handler
        async function handleDeleteAddress(event) {
            event.preventDefault();
            
            const addressId = document.getElementById('deleteAddressId').value;
            
            // Confirmation dialog
            if (!confirm(`Are you sure you want to delete address with ID ${addressId}? This action cannot be undone.`)) {
                return;
            }

            setLoading('deleteAddress-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/deleteAdress/${addressId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Delete Address Response:', response.status, data);

                if (response.ok) {
                    showAlert('deleteAddress-alert', 'Address deleted successfully!', 'success');
                    document.getElementById('deleteAddressForm').reset();
                    setTimeout(() => {
                        closeForm('deleteAddress');
                    }, 1500);
                } else {
                    showAlert('deleteAddress-alert', data.message || 'Failed to delete address', 'error');
                }
            } catch (error) {
                console.error('Error deleting address:', error);
                showAlert('deleteAddress-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('deleteAddress-loading', false);
            }
        }

        // Update Carrier by Truck ID Handler
        async function handleUpdateCarrierByTruckId(event) {
            event.preventDefault();
            
            const orderId = document.getElementById('orderIdForCarrier').value;
            const truckId = document.getElementById('truckIdForCarrier').value;

            setLoading('updateCarrierByTruckId-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/updateorderassigncarrie/${orderId}/bytruckid/${truckId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Update Carrier by Truck ID Response:', response.status, data);

                if (response.ok) {
                    const order = data.data || data;
                    const carrier = order.carrier || {};
                    const cargo = order.cargo || {};
                    const loading = order.loading || {};
                    const unloading = order.unloading || {};
                    const loadingAddress = loading.adress || {};
                    const unloadingAddress = unloading.adress || {};
                    const truck = order.truck || {};
                    const driver = order.driver || {};
                    
                    console.log('Order:', order);
                    console.log('Carrier:', carrier);
                    console.log('Loading Address:', loadingAddress);
                    console.log('Unloading Address:', unloadingAddress);
                    
                    // Order Details
                    document.getElementById('carrierOrderId').textContent = order.id || 'N/A';
                    document.getElementById('carrierOrderStatus').textContent = order.status || 'N/A';
                    
                    // Cargo Details
                    document.getElementById('carrierCargoId').textContent = cargo.id || 'N/A';
                    document.getElementById('carrierCargoName').textContent = cargo.name || 'N/A';
                    document.getElementById('carrierCargoDescription').textContent = cargo.discription || 'N/A';
                    document.getElementById('carrierCargoWeight').textContent = cargo.weight || 'N/A';
                    document.getElementById('carrierCargoCount').textContent = cargo.count || 'N/A';
                    
                    // Loading Address
                    document.getElementById('carrierLoadingStreet').textContent = loadingAddress.street || 'N/A';
                    document.getElementById('carrierLoadingCity').textContent = loadingAddress.city || 'N/A';
                    document.getElementById('carrierLoadingPincode').textContent = loadingAddress.pincode || 'N/A';
                    document.getElementById('carrierLoadingState').textContent = loadingAddress.state || 'N/A';
                    
                    // Unloading Address
                    document.getElementById('carrierUnloadingStreet').textContent = unloadingAddress.street || 'N/A';
                    document.getElementById('carrierUnloadingCity').textContent = unloadingAddress.city || 'N/A';
                    document.getElementById('carrierUnloadingPincode').textContent = unloadingAddress.pincode || 'N/A';
                    document.getElementById('carrierUnloadingState').textContent = unloadingAddress.state || 'N/A';
                    
                    // Truck Details
                    document.getElementById('carrierTruckId').textContent = truck.id || 'N/A';
                    document.getElementById('carrierTruckName').textContent = truck.name || 'N/A';
                    document.getElementById('carrierTruckCapacity').textContent = truck.capacity || 'N/A';
                    
                    // Driver Details
                    document.getElementById('carrierDriverId').textContent = driver.id || 'N/A';
                    document.getElementById('carrierDriverName').textContent = driver.name || 'N/A';
                    document.getElementById('carrierDriverContact').textContent = driver.contact || 'N/A';
                    
                    // Carrier Details
                    document.getElementById('carrierByTruckId').textContent = carrier.id || 'N/A';
                    document.getElementById('carrierByTruckName').textContent = carrier.name || 'N/A';
                    document.getElementById('carrierByTruckContact').textContent = carrier.contact || 'N/A';
                    
                    document.getElementById('updateCarrierByTruckId-details').style.display = 'block';
                    showAlert('updateCarrierByTruckId-alert', 'Carrier assigned successfully!', 'success');
                } else {
                    showAlert('updateCarrierByTruckId-alert', data.message || 'Failed to update carrier', 'error');
                    document.getElementById('updateCarrierByTruckId-details').style.display = 'none';
                }
            } catch (error) {
                console.error('Error updating carrier:', error);
                showAlert('updateCarrierByTruckId-alert', 'Error: ' + error.message, 'error');
                document.getElementById('updateCarrierByTruckId-details').style.display = 'none';
            } finally {
                setLoading('updateCarrierByTruckId-loading', false);
            }
        }

        // Update Loading Unloading DateTime Handler
        async function handleUpdateLoadingUnloadingDateTime(event) {
            event.preventDefault();
            
            const orderId = document.getElementById('orderId').value;

            setLoading('updateLoadingUnloadingDateTime-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/updateloadingunloadingdatebyorder/${orderId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Update Loading/Unloading DateTime Response:', response.status, data);

                if (response.ok) {
                    const dateTimeData = data.data || data;
                    document.getElementById('dateTimeOrderId').textContent = dateTimeData.orderId || dateTimeData.id || 'N/A';
                    document.getElementById('dateTimeLoadingDateTime').textContent = dateTimeData.loadingDateTime || 'N/A';
                    document.getElementById('dateTimeUnloadingDateTime').textContent = dateTimeData.unloadingDateTime || 'N/A';
                    
                    document.getElementById('updateLoadingUnloadingDateTime-details').style.display = 'block';
                    showAlert('updateLoadingUnloadingDateTime-alert', 'DateTime updated successfully!', 'success');
                } else {
                    showAlert('updateLoadingUnloadingDateTime-alert', data.message || 'Failed to update DateTime', 'error');
                    document.getElementById('updateLoadingUnloadingDateTime-details').style.display = 'none';
                }
            } catch (error) {
                console.error('Error updating DateTime:', error);
                showAlert('updateLoadingUnloadingDateTime-alert', 'Error: ' + error.message, 'error');
                document.getElementById('updateLoadingUnloadingDateTime-details').style.display = 'none';
            } finally {
                setLoading('updateLoadingUnloadingDateTime-loading', false);
            }
        }

        // Save Loading Location Handler
        async function handleSaveLoadingLocation(event) {
            event.preventDefault();
            
            const loadingData = {
                id: document.getElementById('loadingLocationId').value
            };

            setLoading('saveLoadingLocation-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/saveloadinglocation`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(loadingData)
                });

                const data = await response.json();
                console.log('Save Loading Location Response:', response.status, data);

                if (response.ok) {
                    const loading = data.data || data;
                    document.getElementById('detailSaveLoadingLocationId').textContent = loading.id || 'N/A';
                    document.getElementById('detailSaveLoadingLocationDate').textContent = loading.date || 'N/A';
                    document.getElementById('detailSaveLoadingLocationTime').textContent = loading.time || 'N/A';
                    document.getElementById('detailSaveLoadingLocationAddressId').textContent = loading.adress?.id || loading.addressId || 'N/A';
                    
                    document.getElementById('saveLoadingLocation-details').style.display = 'block';
                    showAlert('saveLoadingLocation-alert', 'Loading location saved successfully!', 'success');
                } else {
                    showAlert('saveLoadingLocation-alert', data.message || 'Failed to save loading location', 'error');
                    document.getElementById('saveLoadingLocation-details').style.display = 'none';
                }
            } catch (error) {
                console.error('Error saving loading location:', error);
                showAlert('saveLoadingLocation-alert', 'Error: ' + error.message, 'error');
                document.getElementById('saveLoadingLocation-details').style.display = 'none';
            } finally {
                setLoading('saveLoadingLocation-loading', false);
            }
        }

        // Find Loading Location Handler
        async function handleFindLoadingLocation(event) {
            event.preventDefault();
            
            const loadingLocationId = document.getElementById('findLoadingLocationId').value;
            setLoading('findLoadingLocation-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/findinglocation/${loadingLocationId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Find Loading Location Response:', response.status, data);

                if (response.ok && data.data) {
                    const loading = data.data;
                    document.getElementById('detailLoadingLocationId').textContent = loading.id || '-';
                    document.getElementById('detailLoadingLocationDate').textContent = loading.date || '-';
                    document.getElementById('detailLoadingLocationTime').textContent = loading.time || '-';
                    document.getElementById('detailLoadingLocationAddressId').textContent = loading.adress?.id || loading.addressId || '-';
                    document.getElementById('findLoadingLocation-details').style.display = 'block';
                    showAlert('findLoadingLocation-alert', 'Loading location found!', 'success');
                } else {
                    document.getElementById('findLoadingLocation-details').style.display = 'none';
                    showAlert('findLoadingLocation-alert', data.message || 'Loading location not found', 'error');
                }
            } catch (error) {
                console.error('Error finding loading location:', error);
                document.getElementById('findLoadingLocation-details').style.display = 'none';
                showAlert('findLoadingLocation-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('findLoadingLocation-loading', false);
            }
        }

        // Delete Loading Location Handler
        async function handleDeleteLoadingLocation(event) {
            event.preventDefault();
            
            const loadingLocationId = document.getElementById('deleteLoadingLocationId').value;
            
            // Confirmation dialog
            if (!confirm(`Are you sure you want to delete loading location with ID ${loadingLocationId}? This action cannot be undone.`)) {
                return;
            }

            setLoading('deleteLoadingLocation-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/RemoveLocation/${loadingLocationId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Delete Loading Location Response:', response.status, data);

                if (response.ok) {
                    showAlert('deleteLoadingLocation-alert', 'Loading location deleted successfully!', 'success');
                    document.getElementById('deleteLoadingLocationForm').reset();
                    setTimeout(() => {
                        closeForm('deleteLoadingLocation');
                    }, 1500);
                } else {
                    showAlert('deleteLoadingLocation-alert', data.message || 'Failed to delete loading location', 'error');
                }
            } catch (error) {
                console.error('Error deleting loading location:', error);
                showAlert('deleteLoadingLocation-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('deleteLoadingLocation-loading', false);
            }
        }

        // Unloading Location Handlers
        async function handleSaveUnloadingLocation(event) {
            event.preventDefault();
            
            const unloadingLocationId = document.getElementById('unloadingLocationId').value;
            
            setLoading('saveUnloadingLocation-loading', true);
            
            try {
                const payload = {
                    id: parseInt(unloadingLocationId)
                };

                const response = await fetch(`${API_BASE_URL}/saveunloadingadress`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();
                console.log('Save Unloading Location Response:', response.status, data);

                if (response.ok) {
                    showAlert('saveUnloadingLocation-alert', 'Unloading location saved successfully!', 'success');
                    
                    // Display details
                    document.getElementById('detailSaveUnloadingLocationId').textContent = data.id || unloadingLocationId;
                    document.getElementById('detailSaveUnloadingLocationDate').textContent = data.date || 'N/A';
                    document.getElementById('detailSaveUnloadingLocationTime').textContent = data.time || 'N/A';
                    document.getElementById('detailSaveUnloadingLocationAddressId').textContent = data.adress?.id || 'N/A';
                    
                    document.getElementById('saveUnloadingLocation-details').style.display = 'block';
                    document.getElementById('saveUnloadingLocationForm').reset();
                } else {
                    showAlert('saveUnloadingLocation-alert', data.message || 'Failed to save unloading location', 'error');
                }
            } catch (error) {
                console.error('Error saving unloading location:', error);
                showAlert('saveUnloadingLocation-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('saveUnloadingLocation-loading', false);
            }
        }

        async function handleFindUnloadingLocation(event) {
            event.preventDefault();
            
            const unloadingLocationId = document.getElementById('findUnloadingLocationId').value;
            
            setLoading('findUnloadingLocation-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/finddeliverAdress/${unloadingLocationId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Find Unloading Location Response:', response.status, data);

                if (response.ok) {
                    showAlert('findUnloadingLocation-alert', 'Unloading location found!', 'success');
                    
                    // Display Address details
                    document.getElementById('detailUnloadingLocationId').textContent = data.id || 'N/A';
                    document.getElementById('detailUnloadingLocationStreet').textContent = data.street || 'N/A';
                    document.getElementById('detailUnloadingLocationCity').textContent = data.city || 'N/A';
                    document.getElementById('detailUnloadingLocationPincode').textContent = data.pincode || 'N/A';
                    document.getElementById('detailUnloadingLocationState').textContent = data.state || 'N/A';
                    
                    document.getElementById('findUnloadingLocation-details').style.display = 'block';
                } else {
                    showAlert('findUnloadingLocation-alert', data.message || 'Unloading location not found', 'error');
                    document.getElementById('findUnloadingLocation-details').style.display = 'none';
                }
            } catch (error) {
                console.error('Error finding unloading location:', error);
                showAlert('findUnloadingLocation-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('findUnloadingLocation-loading', false);
            }
        }

        async function handleDeleteUnloadingLocation(event) {
            event.preventDefault();
            
            const unloadingLocationId = document.getElementById('deleteUnloadingLocationId').value;
            
            // Confirmation dialog
            if (!confirm(`Are you sure you want to delete unloading location with ID ${unloadingLocationId}? This action cannot be undone.`)) {
                return;
            }

            setLoading('deleteUnloadingLocation-loading', true);
            
            try {
                const response = await fetch(`${API_BASE_URL}/cancle/${unloadingLocationId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                console.log('Delete Unloading Location Response:', response.status, data);

                if (response.ok) {
                    showAlert('deleteUnloadingLocation-alert', 'Unloading location deleted successfully!', 'success');
                    document.getElementById('deleteUnloadingLocationForm').reset();
                    setTimeout(() => {
                        closeForm('deleteUnloadingLocation');
                    }, 1500);
                } else {
                    showAlert('deleteUnloadingLocation-alert', data.message || 'Failed to delete unloading location', 'error');
                }
            } catch (error) {
                console.error('Error deleting unloading location:', error);
                showAlert('deleteUnloadingLocation-alert', 'Error: ' + error.message, 'error');
            } finally {
                setLoading('deleteUnloadingLocation-loading', false);
            }
        }
    </script>
</body>
</html>
